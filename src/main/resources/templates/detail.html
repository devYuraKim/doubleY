<!doctype html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <title th:text="${question.title}"></title>
</head>
<body>

<h1 th:text="${question.title}"></h1>

<!-- 투표 비율 바 -->
<div class="progress-bar">
    <div class="progress-a" th:style="'width:' + ${percentA} + '%'">
        <span th:text="${percentA}+'%'"></span>
    </div>
    <div class="progress-b" th:style="'width:' + ${percentB} + '%'">
        <span th:text="${percentB}+'%'"></span>
    </div>
</div>

<br>

<!-- 선택지 카드 -->
<div>
    <div class="option-card option-a">
        <h3>A</h3>
        <p th:text="${question.optionA}"></p>
    </div>
    <div class="option-card option-b">
        <h3>B</h3>
        <p th:text="${question.optionB}"></p>
    </div>
</div>

<hr>

<!-- 답변 작성 폼 -->
<h3>투표하기</h3>
<form th:action="@{/questions/{id}/answers(id=${question.id})}" method="post">
    <div>
        <label>선택</label><br>
        <select required="" id="answerText" name="answerText">
            <option value="">-- 선택하세요 --</option>
            <option value="A">A</option>
            <option value="B">B</option>
        </select>
    </div>
    <br>
    <div>
        <label for="content">의견</label><br>
        <textarea id="content" rows="3" placeholder="선택 이유를 적어주세요" required="" name="content"></textarea>
    </div>
    <br>
    <button type="submit">투표하기</button>
</form>

<hr>

<h3>투표 결과</h3>
<div>
    <div th:class="'answer-' + ${answer.answerText.toLowerCase()}" th:each="answer: ${answers}">
        <strong th:text="${answer.answerText}"></strong>
        <span th:text="${answer.content}"></span>
    </div>
</div>

<br>
<a href="/questions">목록으로</a>

<!-- 플래시 메시지 -->
<div style="color: green;">
    <p th:text="${message}"></p>
</div>

</body>
</html>